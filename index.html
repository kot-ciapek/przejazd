<!DOCTYPE html><html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Licytacja przejazdu</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
    h1 { text-align: center; }
    .card { background: #fff; padding: 20px; margin: 20px auto; max-width: 500px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 10px; }
    input, select, button { width: 100%; padding: 8px; margin-top: 5px; }
    .result { margin-top: 15px; padding: 10px; background: #eef; border-radius: 5px; }
    .admin { margin-top: 30px; background: #ffe; }
    .hidden { display: none; }
    .countdown { text-align: center; font-size: 18px; margin: 20px; }
  </style>
</head>
<body>
  <h1>Licytacja miejsc w aucie</h1>
  <div class="countdown" id="countdown"></div>  <div class="card">
    <h2>Zaloguj się</h2>
    <label>Imię i nazwisko: <input type="text" id="username"></label>
    <button onclick="login()">Zaloguj</button>
  </div>  <div class="card hidden" id="auctionPanel">
    <h2>Weź udział w licytacji</h2>
    <p><strong>Aktualna kwota:</strong> <span id="currentBid">50</span> zł (prowadzi: <span id="currentLeader">Jan Kowalski</span>)</p>
    <label>Miejsce odbioru:
      <select id="pickup">
        <option value="centrum">Częstochowa - centrum</option>
        <option value="północ">Częstochowa - północ</option>
        <option value="dworzec">Częstochowa - Dworzec PKS</option>
        <option value="inne">Inne (dopłata 1 zł/km)</option>
      </select>
    </label>
    <label id="extraKmLabel" class="hidden">Podaj liczbę kilometrów: <input type="number" id="extraKm" min="0"></label><label>Twoja oferta (zł): <input type="number" id="userBid" min="0"></label>

<button id="bidBtn" onclick="placeBid()">Licytuj</button>
<div class="result hidden" id="result"></div>

  </div>  <div class="card admin hidden" id="adminPanel">
    <h2>Panel admina</h2>
    <label>Aktualna kwota: <input type="number" id="adminBid" value="50"></label>
    <label>Aktualny lider: <input type="text" id="adminLeader" value="Jan Kowalski"></label>
    <button onclick="updateAuction()">Zapisz</button>
  </div><script>
  let currentBid = 50;
  let currentLeader = "Jan Kowalski";
  const endTime = new Date("2025-08-29T15:00:00").getTime();

  function login(){
    const user = document.getElementById('username').value.trim();
    if(!user) return alert("Podaj imię i nazwisko!");
    document.getElementById('auctionPanel').classList.remove('hidden');
    if(user.toLowerCase()==="tylko przejazd"){
      document.getElementById('adminPanel').classList.remove('hidden');
    }
  }

  document.getElementById('pickup').addEventListener('change',()=>{
    const pickup=document.getElementById('pickup').value;
    document.getElementById('extraKmLabel').classList.toggle('hidden',pickup!=="inne");
  });

  function placeBid(){
    const user=document.getElementById('username').value.trim();
    const userBid=parseInt(document.getElementById('userBid').value);
    if(isNaN(userBid)||userBid<=currentBid){
      alert("Twoja oferta musi być większa od aktualnej kwoty!");
      return;
    }
    let finalBid=userBid;
    if(document.getElementById('pickup').value==="inne"){
      const km=parseInt(document.getElementById('extraKm').value)||0;
      finalBid+=km;
    }
    const code=`${user.split(" ")[0]}${user.split(" ")[1]?.charAt(0)||""}, ${finalBid}zł`;
    document.getElementById('result').innerHTML=`Kwota do zapłaty: <strong>${finalBid} zł</strong><br>Kod: <strong>${code}</strong> <button onclick=\"copyCode('${code}')\">Kopiuj</button><br><small>Prześlij kod SMS-em na numer 797 318 071, aby zatwierdzić licytację.</small>`;
    document.getElementById('result').classList.remove('hidden');
  }

  function copyCode(text){
    navigator.clipboard.writeText(text);
    alert("Skopiowano kod: "+text);
  }

  function updateAuction(){
    currentBid=parseInt(document.getElementById('adminBid').value)||currentBid;
    currentLeader=document.getElementById('adminLeader').value||currentLeader;
    document.getElementById('currentBid').innerText=currentBid;
    document.getElementById('currentLeader').innerText=currentLeader;
  }

  function updateCountdown(){
    const now=new Date().getTime();
    const distance=endTime-now;
    if(distance<0){
      document.getElementById('countdown').innerHTML="⛔ Licytacja zakończona";
      document.getElementById('bidBtn').disabled=true;
      return;
    }
    const days=Math.floor(distance/(1000*60*60*24));
    const hours=Math.floor((distance%(1000*60*60*24))/(1000*60*60));
    const minutes=Math.floor((distance%(1000*60*60))/(1000*60));
    const seconds=Math.floor((distance%(1000*60))/1000);
    document.getElementById('countdown').innerHTML=`Do końca: ${days}d ${hours}h ${minutes}m ${seconds}s`;
  }
  setInterval(updateCountdown,1000);
</script></body>
</html>
